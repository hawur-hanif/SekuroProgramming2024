#include "pbPlots.hpp"
#include "supportLib.hpp"

using namespace std;

int main(){
	bool success;
	StringReference *errorMessage = CreateStringReferenceLengthValue(0, L' ');
	RGBABitmapImageReference *imageReference = CreateRGBABitmapImageReference();

	vector<double> xs{0, 4.7996e-005, 0.000239932, 0.000671608, 0.00143858, 0.00263609, 0.00435891, 0.00670132, 0.00975697, 0.0136188, 0.0183789, 0.0241286, 0.030958, 0.0389563, 0.0482116, 0.0588104, 0.0708383, 0.0843792, 0.0995154, 0.116328, 0.134895, 0.155296, 0.177605, 0.201895, 0.228239, 0.256706, 0.287363, 0.320276, 0.355507, 0.393117, 0.433164, 0.475704, 0.52079, 0.568472, 0.618799, 0.671815, 0.727563, 0.786083, 0.847411, 0.911582, 0.978627, 1.04857, 1.12145, 1.19727, 1.27606, 1.35783, 1.4426, 1.53037, 1.62116, 1.71497, 1.81179, 1.91162, 2.01447, 2.12031, 2.22913, 2.34093, 2.45568, 2.57336, 2.69394, 2.8174, 2.94371, 3.07282, 3.20471, 3.33933, 3.47664, 3.61659, 3.75914, 3.90422, 4.05179, 4.20179, 4.35415, 4.50882, 4.66572, 4.82478, 4.98595, 5.14913, 5.31426, 5.48125, 5.65003, 5.8205, 5.9926, 6.16621, 6.34127, 6.51767, 6.69532, 6.87412, 7.05399, 7.2348, 7.41648, 7.59891, 7.78199, 7.96562, 8.14969, 8.33409, 8.51871, 8.70345, 8.88819, 9.07282, 9.25723, 9.44131, 9.62495, 9.80802, 9.99043, 10.172, 10.3528, 10.5325, 10.711, 10.8884, 11.0644, 11.2389, 11.4118, 11.583, 11.7525, 11.92, 12.0855, 12.2488, 12.4099, 12.5687, 12.725, 12.8788, 13.0299, 13.1782, 13.3237, 13.4662, 13.6056, 13.7419, 13.875, 14.0047, 14.1311, 14.2539, 14.3731, 14.4886, 14.6004, 14.7084, 14.8124, 14.9125, 15.0085, 15.1005, 15.1882, 15.2717, 15.351, 15.4258, 15.4963, 15.5623, 15.6239, 15.6809, 15.7333, 15.7811, 15.8243, 15.8628, 15.8966, 15.9256, 15.9499, 15.9695, 15.9842, 15.9942, 15.9994, 15.9998, 15.9954, 15.9861, 15.9721, 15.9534, 15.9298, 15.9015, 15.8685, 15.8307, 15.7883, 15.7412, 15.6895, 15.6333, 15.5725, 15.5071, 15.4374, 15.3632, 15.2846, 15.2018, 15.1147, 15.0234, 14.9281, 14.8286, 14.7252, 14.6178, 14.5067, 14.3917, 14.2731, 14.1508, 14.0251, 13.8959, 13.7634, 13.6276, 13.4886, 13.3466, 13.2016, 13.0537, 12.903, 12.7497, 12.5938, 12.4354, 12.2746, 12.1116, 11.9465, 11.7793, 11.6101, 11.4392, 11.2665, 11.0923, 10.9165, 10.7394, 10.561, 10.3815, 10.2009, 10.0194, 9.83713, 9.65415, 9.47059, 9.28658, 9.10221, 8.91761, 8.73287, 8.54813, 8.36348, 8.17904, 7.99491, 7.81121, 7.62803, 7.44549, 7.26369, 7.08273, 6.9027, 6.72373, 6.54589, 6.36928, 6.19401, 6.02015, 5.84781, 5.67707, 5.50802, 5.34073, 5.1753, 5.0118, 4.85032, 4.69091, 4.53366, 4.37863, 4.2259, 4.07552, 3.92756, 3.78208, 3.63912, 3.49876, 3.36102, 3.22597, 3.09364, 2.96409, 2.83733, 2.71342, 2.59237, 2.47423, 2.35901, 2.24674, 2.13744, 2.03112, 1.9278, 1.82749, 1.73019, 1.6359, 1.54463, 1.45638, 1.37113, 1.28888, 1.20962, 1.13332, 1.05998, 0.989573, 0.922069, 0.857442, 0.795663, 0.736698, 0.680511, 0.627063, 0.576311, 0.52821, 0.482714, 0.439772, 0.399332, 0.361337, 0.325731, 0.292454, 0.261441, 0.23263, 0.205953, 0.18134, 0.158721, 0.138022, 0.119167, 0.10208, 0.0866826, 0.0728932, 0.0606299, 0.0498091, 0.0403457, 0.032153, 0.0251434, 0.0192278, 0.0143161, 0.0103174, 0.00713952, 0.00468977, 0.00287456, 0.00159972, 0.00077054, 0.000291849, 6.8137e-005, 3.63846e-006, 2.42108e-006, -3.15058e-005, -0.0001941, -0.000581191, -0.00128838, -0.00241096, -0.00404379, -0.00628124, -0.00921705, -0.0129443, -0.0175552, -0.0231412, -0.0297926, -0.0375989, -0.0466481, -0.0570272, -0.0688219, -0.0821162, -0.0969928, -0.113533, -0.131816, -0.151919, -0.173919, -0.197889, -0.223901, -0.252025, -0.282329, -0.314878, -0.349736, -0.386963, -0.426619, -0.468758, -0.513435, -0.5607, -0.610603, -0.663188, -0.718498, -0.776574, -0.837453, -0.901169, -0.967754, -1.03724, -1.10964, -1.18499, -1.26331, -1.3446, -1.42889, -1.51619, -1.6065, -1.69982, -1.79616, -1.89552, -1.99788, -2.10325, -2.2116, -2.32293, -2.43721, -2.55442, -2.67454, -2.79755, -2.9234, -3.05207, -3.18352, -3.31771, -3.45459, -3.59413, -3.73626, -3.88094, -4.02812, -4.17774, -4.32973, -4.48403, -4.64058, -4.79931, -4.96014, -5.12301, -5.28783, -5.45453, -5.62303, -5.79324, -5.96508, -6.13846, -6.3133, -6.48949, -6.66694, -6.84557, -7.02527, -7.20595, -7.38749, -7.56981, -7.75279, -7.93634, -8.12035, -8.3047, -8.4893, -8.67402, -8.85877, -9.04342, -9.22788, -9.41202, -9.59573, -9.77891, -9.96143, -10.1432, -10.324, -10.5039, -10.6827, -10.8602, -11.0364, -11.2112, -11.3844, -11.5559, -11.7256, -11.8934, -12.0593, -12.223, -12.3844, -12.5436, -12.7003, -12.8545, -13.006, -13.1548, -13.3007, -13.4437, -13.5836, -13.7205, -13.854, -13.9843, -14.1112, -14.2345, -14.3543, -14.4705, -14.5828, -14.6914, -14.7961, -14.8968, -14.9935, -15.0861, -15.1745, -15.2587, -15.3386, -15.4142, -15.4854, -15.5521, -15.6144, -15.6721, -15.7253, -15.7738, -15.8177, -15.857, -15.8915, -15.9213, -15.9464, -15.9667, -15.9822, -15.9929, -15.9989, -16, -15.9964, -15.9879, -15.9747, -15.9567, -15.9339, -15.9063, -15.874, -15.8371, -15.7954, -15.749, -15.6981, -15.6425, -15.5824, -15.5178, -15.4488, -15.3753, -15.2974, -15.2153, -15.1289, -15.0383, -14.9435, -14.8447, -14.7419, -14.6352, -14.5246, -14.4103, -14.2922, -14.1706, -14.0454, -13.9167, -13.7847, -13.6494, -13.5109, -13.3694, -13.2249, -13.0774, -12.9272, -12.7743, -12.6188, -12.4608, -12.3004, -12.1377, -11.9729, -11.806, -11.6372, -11.4665, -11.2941, -11.1201, -10.9446, -10.7677, -10.5895, -10.4101, -10.2297, -10.0484, -9.86621, -9.68333, -9.49986, -9.31591, -9.13159, -8.94702, -8.7623, -8.57755, -8.39288, -8.2084, -8.02421, -7.84043, -7.65717, -7.47452, -7.29259, -7.11149, -6.93131, -6.75216, -6.57413, -6.39732, -6.22183, -6.04774, -5.87515, -5.70415, -5.53482, -5.36725, -5.20152, -5.03771, -4.8759, -4.71615, -4.55856, -4.40317, -4.25007, -4.09931, -3.95096, -3.80508, -3.66172, -3.52094, -3.38278, -3.2473, -3.11454, -2.98453, -2.85733, -2.73296, -2.61146, -2.49285, -2.37717, -2.26443, -2.15465, -2.04786, -1.94406, -1.84327, -1.74548, -1.65072, -1.55897, -1.47023, -1.38451, -1.30178, -1.22204, -1.14528, -1.07147, -1.00059, -0.932628, -0.867545, -0.805314, -0.745904, -0.689277, -0.635395, -0.584216, -0.535697, -0.489789, -0.446444, -0.405609, -0.367228, -0.331246, -0.297601, -0.266233, -0.237076, -0.210063, -0.185126, -0.162194, -0.141194, -0.122051, -0.104688, -0.0890264, -0.0749862, -0.0624855, -0.0514406, -0.0417667, -0.0333775, -0.0261854, -0.0201015, -0.0150361, -0.0108981, -0.00759566, -0.0050362, -0.00312621, -0.00177164, -0.000877836, -0.000349714, -9.18071e-005, -8.3698e-006, -3.50031e-006, 1.87898e-005, 0.000154473};
	vector<double> ys{5, 5.0041, 5.01229, 5.02457, 5.04092, 5.06132, 5.08574, 5.11417, 5.14656, 5.18287, 5.22307, 5.2671, 5.31491, 5.36646, 5.42166, 5.48047, 5.54281, 5.60861, 5.67779, 5.75026, 5.82595, 5.90476, 5.9866, 6.07137, 6.15898, 6.24932, 6.34228, 6.43775, 6.53563, 6.63579, 6.73812, 6.84249, 6.94879, 7.05689, 7.16665, 7.27796, 7.39068, 7.50468, 7.61981, 7.73596, 7.85298, 7.97073, 8.08907, 8.20786, 8.32698, 8.44626, 8.56558, 8.68479, 8.80375, 8.92232, 9.04036, 9.15774, 9.27431, 9.38993, 9.50447, 9.61779, 9.72976, 9.84025, 9.94912, 10.0562, 10.1615, 10.2647, 10.3659, 10.4648, 10.5613, 10.6553, 10.7468, 10.8355, 10.9214, 11.0044, 11.0844, 11.1613, 11.2349, 11.3053, 11.3722, 11.4357, 11.4956, 11.5519, 11.6044, 11.6532, 11.698, 11.739, 11.776, 11.809, 11.8379, 11.8626, 11.8832, 11.8995, 11.9116, 11.9194, 11.9229, 11.922, 11.9169, 11.9073, 11.8933, 11.875, 11.8523, 11.8251, 11.7936, 11.7577, 11.7175, 11.6728, 11.6239, 11.5706, 11.5131, 11.4512, 11.3852, 11.315, 11.2406, 11.1621, 11.0796, 10.9931, 10.9026, 10.8081, 10.7099, 10.6078, 10.5021, 10.3926, 10.2796, 10.163, 10.043, 9.91961, 9.7929, 9.66296, 9.52986, 9.39369, 9.25452, 9.11244, 8.96753, 8.81988, 8.66956, 8.51667, 8.36129, 8.2035, 8.0434, 7.88108, 7.71661, 7.55009, 7.3816, 7.21123, 7.03908, 6.86522, 6.68974, 6.51274, 6.33428, 6.15447, 5.97338, 5.79109, 5.60768, 5.42325, 5.23786, 5.05159, 4.86452, 4.67673, 4.48829, 4.29927, 4.10974, 3.91977, 3.72943, 3.53879, 3.3479, 3.15682, 2.96563, 2.77437, 2.58311, 2.39189, 2.20077, 2.00979, 1.81901, 1.62847, 1.43822, 1.24829, 1.05873, 0.869564, 0.68084, 0.492586, 0.304835, 0.117616, -0.069046, -0.255124, -0.440595, -0.625439, -0.809635, -0.993166, -1.17602, -1.35817, -1.53962, -1.72035, -1.90035, -2.07962, -2.25815, -2.43594, -2.61297, -2.78926, -2.9648, -3.13958, -3.31362, -3.48691, -3.65946, -3.83127, -4.00235, -4.1727, -4.34234, -4.51126, -4.67948, -4.847, -5.01384, -5.18, -5.34549, -5.51032, -5.6745, -5.83804, -6.00095, -6.16324, -6.32492, -6.486, -6.64648, -6.80637, -6.96569, -7.12443, -7.2826, -7.44022, -7.59728, -7.75379, -7.90975, -8.06516, -8.22003, -8.37436, -8.52814, -8.68138, -8.83407, -8.98621, -9.13778, -9.2888, -9.43924, -9.5891, -9.73837, -9.88704, -10.0351, -10.1825, -10.3293, -10.4754, -10.6209, -10.7656, -10.9096, -11.0529, -11.1954, -11.3371, -11.478, -11.6181, -11.7572, -11.8955, -12.0328, -12.1692, -12.3046, -12.4389, -12.5721, -12.7042, -12.8352, -12.965, -13.0936, -13.2209, -13.3468, -13.4715, -13.5947, -13.7165, -13.8368, -13.9555, -14.0727, -14.1882, -14.3021, -14.4143, -14.5247, -14.6333, -14.74, -14.8448, -14.9477, -15.0485, -15.1473, -15.244, -15.3386, -15.431, -15.5211, -15.609, -15.6945, -15.7777, -15.8584, -15.9367, -16.0126, -16.0858, -16.1565, -16.2246, -16.29, -16.3528, -16.4128, -16.4701, -16.5245, -16.5762, -16.625, -16.6709, -16.7139, -16.754, -16.7912, -16.8253, -16.8565, -16.8847, -16.9098, -16.9319, -16.9509, -16.9669, -16.9797, -16.9895, -16.9962, -16.9998, -17.0003, -16.9977, -16.992, -16.9832, -16.9713, -16.9563, -16.9383, -16.9172, -16.893, -16.8658, -16.8356, -16.8024, -16.7662, -16.727, -16.6849, -16.6399, -16.5921, -16.5413, -16.4877, -16.4313, -16.3722, -16.3103, -16.2457, -16.1785, -16.1086, -16.0362, -15.9612, -15.8836, -15.8037, -15.7213, -15.6365, -15.5493, -15.4599, -15.3683, -15.2744, -15.1783, -15.0802, -14.98, -14.8778, -14.7736, -14.6675, -14.5595, -14.4496, -14.338, -14.2247, -14.1097, -13.993, -13.8748, -13.7549, -13.6336, -13.5109, -13.3867, -13.2611, -13.1343, -13.0061, -12.8767, -12.7461, -12.6143, -12.4814, -12.3475, -12.2124, -12.0764, -11.9393, -11.8014, -11.6625, -11.5227, -11.3821, -11.2406, -11.0984, -10.9553, -10.8116, -10.667, -10.5218, -10.3759, -10.2293, -10.0821, -9.93427, -9.7858, -9.63672, -9.48704, -9.33678, -9.18595, -9.03455, -8.88259, -8.73008, -8.57701, -8.4234, -8.26925, -8.11455, -7.95931, -7.80353, -7.64719, -7.49031, -7.33287, -7.17487, -7.01631, -6.85718, -6.69747, -6.53718, -6.3763, -6.21481, -6.05272, -5.89, -5.72666, -5.56269, -5.39806, -5.23278, -5.06684, -4.90022, -4.73292, -4.56492, -4.39622, -4.22682, -4.05669, -3.88584, -3.71427, -3.54195, -3.3689, -3.1951, -3.02055, -2.84526, -2.66921, -2.49241, -2.31486, -2.13657, -1.95754, -1.77777, -1.59727, -1.41605, -1.23412, -1.05149, -0.868169, -0.684183, -0.499544, -0.314271, -0.128383, 0.058095, 0.24514, 0.432725, 0.620821, 0.809399, 0.998425, 1.18786, 1.37768, 1.56784, 1.75829, 1.949, 2.13992, 2.331, 2.52219, 2.71345, 2.90471, 3.09593, 3.28705, 3.478, 3.66873, 3.85918, 4.04927, 4.23895, 4.42814, 4.61677, 4.80478, 4.99208, 5.17861, 5.36429, 5.54904, 5.73278, 5.91543, 6.09692, 6.27715, 6.45604, 6.63352, 6.80949, 6.98388, 7.15658, 7.32753, 7.49662, 7.66378, 7.82891, 7.99193, 8.15275, 8.31128, 8.46744, 8.62113, 8.77228, 8.92079, 9.06658, 9.20957, 9.34968, 9.48681, 9.6209, 9.75185, 9.8796, 10.0041, 10.1252, 10.2428, 10.357, 10.4676, 10.5745, 10.6778, 10.7773, 10.8729, 10.9647, 11.0525, 11.1363, 11.2161, 11.2917, 11.3633, 11.4307, 11.4938, 11.5527, 11.6074, 11.6577, 11.7037, 11.7454, 11.7827, 11.8156, 11.8441, 11.8682, 11.888, 11.9033, 11.9143, 11.9209, 11.9231, 11.921, 11.9145, 11.9038, 11.8888, 11.8696, 11.8462, 11.8186, 11.787, 11.7512, 11.7115, 11.6679, 11.6204, 11.569, 11.5139, 11.4552, 11.3928, 11.327, 11.2577, 11.1851, 11.1093, 11.0303, 10.9482, 10.8632, 10.7753, 10.6847, 10.5915, 10.4958, 10.3976, 10.2972, 10.1946, 10.09, 9.98344, 9.87512, 9.76513, 9.65362, 9.54071, 9.42654, 9.31125, 9.19497, 9.07784, 8.95999, 8.84157, 8.72272, 8.60357, 8.48428, 8.36497, 8.24578, 8.12687, 8.00837, 7.89042, 7.77315, 7.65671, 7.54124, 7.42686, 7.31372, 7.20195, 7.09168, 6.98304, 6.87615, 6.77115, 6.66816, 6.5673, 6.46868, 6.37243, 6.27866, 6.18747, 6.09898, 6.01329, 5.93051, 5.85072, 5.77403, 5.70052, 5.63029, 5.5634, 5.49995, 5.44001, 5.38365, 5.33093, 5.28193, 5.23668, 5.19526, 5.1577, 5.12406, 5.09437, 5.06867, 5.04698, 5.02934, 5.01577, 5.00627, 5.00087, 4.99956, 5.00235, 5.00924};

	success = DrawScatterPlot(imageReference, 600, 400, &xs, &ys, errorMessage);

	if(success){
		vector<double> *pngdata = ConvertToPNG(imageReference->image);
		WriteToFile(pngdata, "example1.png");
		DeleteImage(imageReference->image);
	}else{
		cerr << "Error: ";
		for(wchar_t c : *errorMessage->string){
			wcerr << c;
		}
		cerr << endl;
	}

	FreeAllocations();

	return success ? 0 : 1;
}
